<div class="device">
  <h2 class="title">QUẢN LÝ THIẾT BỊ</h2>
  <p-toast></p-toast>
  <p-accordion>
    <p-accordionTab>
      <ng-template pTemplate="header">
        <div style="color: var(--primary-color)">
          <i style="margin-right: 10px" class="bi bi-search"></i>
          <span>Tìm kiếm</span>
        </div>
      </ng-template>
      <div class="form_search">
        <form [formGroup]="searchDeviceForm" (ngSubmit)="onSubmit()" action="">
          <div class="form_list">
            <div class="form_item">
              <label for="code">Mã tài sản</label>
              <input
                formControlName="code"
                placeholder="Enter response here"
                type="text"
                id="code"
                pInputText
              />
              <p
                *ngIf="getControl('code')?.dirty && getControl('code')?.errors"
                class="warning"
              >
                <i class="bi bi-cone-striped"></i>{{ warning.code }}
              </p>
            </div>
            <div class="form_item">
              <label for="name">Tên tài sản</label>
              <input
                formControlName="name"
                placeholder="Enter response here"
                type="text"
                id="name"
                pInputText
              />
              <p
                *ngIf="getControl('name')?.dirty && getControl('name')?.errors"
                class="warning"
              >
                <i class="bi bi-cone-striped"></i>{{ warning.name }}
              </p>
            </div>
            <div class="form_item">
              <label for="employee">NV dang sử dụng</label>
              <input
                formControlName="employee"
                placeholder="Enter response here"
                type="text"
                id="employee"
                pInputText
              />
              <p
                *ngIf="
                  getControl('employee')?.dirty &&
                  getControl('employee')?.errors
                "
                class="warning"
              >
                <i class="bi bi-cone-striped"></i>{{ warning.employee }}
              </p>
            </div>
            <div class="form_item">
              <label for="type">Loại</label>
              <p-dropdown
                formControlName="type"
                id="type"
                [options]="status"
                optionLabel="value"
                placeholder="Chọn"
              ></p-dropdown>
            </div>
            <div class="form_item">
              <label for="status">Trạng thái tài sản</label>
              <p-dropdown
                formControlName="status"
                id="status"
                placeholder="Chọn"
                [options]="sex"
                optionLabel="value"
              ></p-dropdown>
            </div>
          </div>

          <div class="action">
            <button
              type="button"
              pButton
              class="p-button-outlined p-button-danger p-button-sm"
              label="Xoá"
            ></button>
            <button
              type="submit"
              pButton
              class="p-button-primary p-button-sm"
              label="Tìm kiếm"
            ></button>
          </div>
        </form>
      </div>
    </p-accordionTab>
  </p-accordion>
  <div class="more_option">
    <button
      pButton
      icon="pi pi-download"
      class="p-button-outlined p-button-sm p-button-danger"
    ></button>
    <button
      pButton
      icon="bi bi-qr-code-scan"
      class="p-button-outlined p-button-sm"
    ></button>
    <button
      (click)="handleDisplayCreateDevice()"
      pButton
      icon="pi pi-plus"
      iconpos="left"
      label="Thêm mới"
      class="p-button-sm p-button-success"
    ></button>
  </div>
  <p-table
    selectionMode="single"
    [value]="deviceList"
    [tableStyle]="{ 'min-width': '50rem' }"
  >
    <ng-template pTemplate="caption">
      <tr>
        <th>450 bản ghi</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="header">
      <tr>
        <th>Mã tài sản</th>
        <th>Loại</th>
        <th>Tên tài sản</th>
        <th>Nhà cung cấp</th>
        <th>Người sử dụng</th>
        <th>Trạng thái</th>
        <th>Hành động</th>
      </tr>
    </ng-template>
    <ng-template pTemplate="body" let-device>
      <tr [pSelectableRow]="device">
        <td>{{ device.codeDevice }}</td>
        <td>{{ device.type }}</td>
        <td>{{ device.nameDevice }}</td>
        <td>{{ device.provider }}</td>
        <td>{{ device.name }}</td>
        <td>{{ device.state }}</td>
        <td>
          <div>
            <p-splitButton (onDropdownClick)="handleActionsClick(device.id)" styleClass="p-button-sm mr-2 mb-2 p-button-outlined" [model]="actions"></p-splitButton>
          </div>
        </td>
      </tr>
    </ng-template>
  </p-table>
</div>
